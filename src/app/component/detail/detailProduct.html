<div *ngIf="selectedProduct" 
     class="grid grid-cols-1 md:grid-cols-2 gap-10 p-4 sm:p-8 md:p-12 lg:p-20 h-full">

  <!-- Left: Product Image Full -->
  <div class="flex-shrink-0 relative">
    <img [src]="selectedProduct.img" 
         [alt]="'Image of ' + selectedProduct.name" 
         class="w-full h-full max-h-[80vh] object-contain rounded-lg shadow-lg" />

    <!-- Discount Badge -->
    <span *ngIf="selectedProduct.discount > 0" 
          class="absolute top-4 left-4 bg-red-500 text-white text-xs sm:text-sm px-3 py-1 rounded-lg shadow">
      -{{ selectedProduct.discount }}%
    </span>
  </div>

  <!-- Right: Product Info -->
  <div class="flex flex-col justify-center">
    <h2 class="text-2xl sm:text-3xl font-bold mb-4">{{ selectedProduct.name }}</h2>
    <p class="mb-4 text-sm sm:text-base text-gray-700">{{ selectedProduct.description }}</p>

    <!-- Product Details Table -->
    <table class="w-full text-left border-collapse border border-gray-300 rounded text-sm sm:text-base">
      <tbody>
        <tr class="border border-gray-300">
          <td class="px-3 sm:px-4 py-2 font-semibold border border-gray-300">Price</td>
          <td class="px-3 sm:px-4 py-2 border border-gray-300">
            <span *ngIf="selectedProduct.discount > 0" class="line-through text-gray-500 mr-2">
              {{ selectedProduct.price | currency:'USD' }}
            </span>
            <span class="font-bold text-lg text-green-600">
              {{ (selectedProduct.price * (1 - selectedProduct.discount / 100)) | currency:'USD' }}
            </span>
          </td>
        </tr>

        <tr *ngIf="selectedProduct.discount > 0" class="border border-gray-300">
          <td class="px-3 sm:px-4 py-2 font-semibold text-red-500 border border-gray-300">Discount</td>
          <td class="px-3 sm:px-4 py-2 text-red-500 border border-gray-300">
            {{ selectedProduct.discount }}%
          </td>
        </tr>

        <tr class="border border-gray-300">
          <td class="px-3 sm:px-4 py-2 font-semibold border border-gray-300">Quantity</td>
          <td class="px-3 sm:px-4 py-2 border border-gray-300">
            <div class="flex items-center gap-2">
              <button aria-label="Decrease quantity" 
                      (click)="decreaseQty(selectedProduct)" 
                      class="bg-gray-300 px-2 rounded hover:bg-gray-400">-</button>
              <span>{{ selectedProduct.qty || 1 }}</span>
              <button aria-label="Increase quantity" 
                      (click)="increaseQty(selectedProduct)" 
                      class="bg-gray-300 px-2 rounded hover:bg-gray-400">+</button>
            </div>
          </td>
        </tr>

        <tr class="border border-gray-300">
          <td class="px-3 sm:px-4 py-2 font-semibold border border-gray-300">Total</td>
          <td class="px-3 sm:px-4 py-2 font-bold border border-gray-300">
            {{ ((selectedProduct.price * (1 - selectedProduct.discount / 100)) * (selectedProduct.qty || 1)) | currency:'USD' }}
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Add to Cart Button -->
    <button (click)="addToCart(selectedProduct)" 
            class="mt-6 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg shadow w-full sm:w-auto">
      Add to Cart
    </button>
  </div>
</div>
